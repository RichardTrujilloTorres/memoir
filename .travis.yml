language: php

php: 7.2

before_script:
  - sudo apt-get install -y php-mongodb
  - sudo pecl install -y mongodb
  - cp .env.example .env
  - phpenv config-add .travis.config.ini
  - mongo memoir_test --eval 'db.createUser({user:"travis",pwd:"test",roles:["readWrite"]});'
  - travis_retry composer self-update
  - travis_retry composer update --no-scripts --no-interaction

services: mongodb

script: ./bin/phpunit
